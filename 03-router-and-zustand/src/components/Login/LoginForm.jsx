import { useId } from "react";
import { useAuthStore } from "../../store/authStore";
import { NavLink, useNavigate } from "react-router";


export function LoginForm() {
    const emailId = useId()
    const passwordId = useId()
    const rememberId = useId()
    const { login, isLoggedIn } = useAuthStore()
    const navigate = useNavigate()

    const handleLogin = (event) => {
        event.preventDefault()

        const formData = new FormData(event.target)
        
        const email = formData.get(emailId)
        const password = formData.get(passwordId)
        const remember = formData.get(rememberId)
        if(email&&password){
            login()
            navigate("/")
        }
    }

    return (
        <form onSubmit={handleLogin}>
            <div>
                <label>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg>
                    <input type="email" name={emailId} placeholder="Correo Electrónico" />
                </label>
                <label>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="icon icon-tabler icons-tabler-outline icon-tabler-lock"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z" /><path d="M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0" /><path d="M8 11v-4a4 4 0 1 1 8 0v4" /></svg>
                    <input type="password" name={passwordId} placeholder="Contraseña" />
                </label>
            </div>
            <div>
                <label>
                    <input type="checkbox" name={rememberId} />
                    Recuerdame
                </label>
                <NavLink to="/recovery">Olvidé la contraseña</NavLink>
            </div>
            <button>Iniciar sesión</button>
        </form>
    )
}